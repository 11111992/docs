<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Fira+Mono|Source+Sans+Pro:400,400i,600" rel="stylesheet">
    
    <link rel="stylesheet" href="/scss/site.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

    <link rel="icon" type="image/png" href="/images/favicon.png">
    
    

    <title>Managing Stacks Â· Cloud Native Buildpack Documentation</title>
  </head>
  <body>
    <header>
  <a href="/" class="logo"><img src="/images/buildpacks-logo.svg" alt="Buildpacks.io Logo"></a>
  <input type="checkbox" id="mobile-nav-toggle">
  <label for="mobile-nav-toggle">&#9776;</label>
  <ul>
    
    
      
      <li><a class="" href="/">Home</a></li>
    
      
      <li><a class="active" href="/docs">Docs</a></li>
    
    <li><a href="https://github.com/buildpack" class="github-button icon-button bg-blue button">GitHub</a></li>
  </ul>
</header>

    

<div class='docs'>
  <div class='container-fluid'>
    <div class='row'>
      <div class='col-sm-3 docs-sidebar'>
        

<nav class='sidebar'>
    <ul>
      <li data-nav-id="/docs/using-pack/" class="dd-item
          depth-1 parent haschildren
      ">
        <a href="/docs/using-pack/">Getting Started with pack</a>
          <ul>
        <li data-nav-id="/docs/using-pack/building-app/" class="dd-item">
          <a href="/docs/using-pack/building-app/">
            Building app images with <code>build</code>
          </a>
      </li>
        <li data-nav-id="/docs/using-pack/update-app-rebase/" class="dd-item">
          <a href="/docs/using-pack/update-app-rebase/">
            Updating app images using <code>rebase</code>
          </a>
      </li>
        <li data-nav-id="/docs/using-pack/working-with-builders/" class="dd-item">
          <a href="/docs/using-pack/working-with-builders/">
            Working with builders
          </a>
      </li>
        <li data-nav-id="/docs/using-pack/managing-stacks/" class="dd-item active">
          <a href="/docs/using-pack/managing-stacks/">
            Managing Stacks
          </a>
      </li>
          </ul>
      </li></ul>
    <ul>
      <li data-nav-id="/docs/create-buildpack/" class="dd-item
          depth-1
      ">
        <a href="/docs/create-buildpack/">Creating a Cloud Native Buildpack</a>
      </li></ul>
</nav>



      </div>
      <div class='col-sm-9 docs-content'>
        <h1>Managing Stacks</h1>
        

<h2 id="managing-stacks">Managing stacks</h2>

<p>As mentioned <a href="#building-explained">previously</a>, a stack is associated with a build image and a run image. Stacks in
<code>pack</code>&rsquo;s configuration can be managed using the following commands:</p>

<pre><code class="language-bash">$ pack add-stack &lt;stack-name&gt; --build-image &lt;build-image-name&gt; --run-image &lt;run-image-name1,run-image-name2,...&gt;
</code></pre>

<pre><code class="language-bash">$ pack update-stack &lt;stack-name&gt; --build-image &lt;build-image-name&gt; --run-image &lt;run-image-name1,run-image-name2,...&gt;
</code></pre>

<pre><code class="language-bash">$ pack delete-stack &lt;stack-name&gt;
</code></pre>

<pre><code class="language-bash">$ pack set-default-stack &lt;stack-name&gt;
</code></pre>

<blockquote>
<p>Technically, a stack can be associated with multiple run images, as a variant is needed for each registry to
which an app image might be published when using <code>--publish</code>.</p>
</blockquote>

<h3 id="example-adding-a-stack">Example: Adding a stack</h3>

<p>In this example, a new stack called <code>org.example.my-stack</code> is added and associated with build image <code>my-stack/build</code>
and run image <code>my-stack/run</code>.</p>

<pre><code class="language-bash">$ pack add-stack org.example.my-stack --build-image my-stack/build --run-image my-stack/run
</code></pre>

<h3 id="example-updating-a-stack">Example: Updating a stack</h3>

<p>In this example, an existing stack called <code>org.example.my-stack</code> is updated with a new build image <code>my-stack/build:v2</code>
and a new run image <code>my-stack/run:v2</code>.</p>

<pre><code class="language-bash">$ pack add-stack org.example.my-stack --build-image my-stack/build:v2 --run-image my-stack/run:v2
</code></pre>

<h3 id="example-deleting-a-stack">Example: Deleting a stack</h3>

<p>In this example, the existing stack <code>org.example.my-stack</code> is deleted from <code>pack</code>&rsquo;s configuration.</p>

<pre><code class="language-bash">$ pack delete-stack org.example.my-stack
</code></pre>

<h3 id="example-setting-the-default-stack">Example: Setting the default stack</h3>

<p>In this example, the default stack, used by <a href="#working-with-builders-using-create-builder"><code>create-builder</code></a>, is set to
<code>org.example.my-stack</code>.</p>

<pre><code class="language-bash">$ pack set-default-stack org.example.my-stack
</code></pre>

<h3 id="listing-stacks">Listing stacks</h3>

<p>To inspect available stacks and their names (denoted by <code>id</code>), run:</p>

<pre><code class="language-bash">$ cat ~/.pack/config.toml

...

[[stacks]]
  id = &quot;io.buildpacks.stacks.bionic&quot;
  build-images = [&quot;packs/build&quot;]
  run-images = [&quot;packs/run&quot;]

[[stacks]]
  id = &quot;org.example.my-stack&quot;
  build-images = [&quot;my-stack/build&quot;]
  run-images = [&quot;my-stack/run&quot;]

...
</code></pre>

<blockquote>
<p>Note that this method of inspecting available stacks will soon be replaced by a new command. The format of
<code>config.toml</code> is subject to change at any time.</p>
</blockquote>

        
  <hr>
  <div class='footline'>
    
      <div class='footline-author'>
        Last modified by <a href="mailto:ssisil@pivotal.io">Scott Sisil</a>
      </div>
    
    
    
  </div>


      </div>
    </div>
  </div>
</div>



    <footer>
  <div class="container footer">
      <a href="https://www.cncf.io/" style="width: 50%;"><img src="/images/cncf-color.svg" class="footer-logo"></a>
      <p>We are a <a href="https://www.cncf.io/">Cloud Native Sandbox</a> project.</p>
  </div>
  <div class="bg-blue">
    <div class="container sub-footer">
      <p>Reach out <a href="https://slack.buildpacks.io">on Slack</a> to learn more.</p>
      <ul>
        <li><a href="https://twitter.com/buildpacks_io">Twitter</a> <span>&bull;</span></li>
        
        <li><a href="https://github.com/buildpack">GitHub</a></li>
      </ul>
    </div>
  </div>
</footer>

  </body>
</html>
